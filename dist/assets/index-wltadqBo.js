(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();class d{constructor(e,t){this.factory=e,this.repository=t}create(e,t=""){let r=e,o=0;for(;this.repository.find(r);)o++,r=`${e} (${o})`;const i=this.factory.create(r,t);return this.repository.save(i)}}class u{static DateFormatBrazilian(){const e=new Date;return new Intl.DateTimeFormat("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}}class m{constructor(e,t,r,o){this.id=e,this.name=t,this.create_date=r,this.color=o}}class f{static create(e,t=void 0){return new m(e.trim(),e.trim(),u.DateFormatBrazilian(),t)}}class h{constructor(e){this.key=e}_loadAll(){return JSON.parse(localStorage.getItem(this.key))||[]}_saveAll(e){localStorage.setItem(this.key,JSON.stringify(e))}save(e){const t=this._loadAll();return t.push(e),this._saveAll(t),e}load(){return this._loadAll()}find(e){return this._loadAll().find(t=>t.id==e)}edit(e){const t=this._loadAll(),r=t.findIndex(o=>o.id===e.id);return r!==-1&&(t[r]=e,this._saveAll(t)),e}remove(e){const t=this._loadAll().filter(r=>r.id!==e.id);this._saveAll(t)}clear(e){localStorage.removeItem(this.key)}}class p{constructor(e=[],t=[],r=[]){this.validatorsEdit=e,this.validatorsRemove=t,this.validatorsSave=r}validate(e,t){if(!Array.isArray(t))throw new Error("Estratégia de validação inválida.");t.forEach(r=>r.validate(e))}save(e){return this.validate(e,this.validatorsSave),e}remove(e){return this.validate(e,this.validatorsRemove),e}edit(e,t={}){return this.validate(e,this.validatorsEdit),{...e,...t}}}class y extends p{constructor(e=[],t=[],r=[]){super(e,t,r)}edit(e,t={}){return this.validate(e,this.validatorsEdit),{...e,...t}}}class v{constructor(e,t){this.service=e,this.repository=t}load(){return this.repository.load()}save(e){return this.service.save(e),this.repository.save(e)}remove(e){const t=this.service.remove(e);return this.repository.remove(t)}edit(e){return this.repository.edit(e)}find(e){return this.repository.find(e)}clear(e){return this.repository.clear(e)}}class _ extends v{constructor(e,t){super(e,t)}completed(e){return e.completed?e.completed=!1:e.completed=!0,this.repository.edit(e)}}const g=new y([],[],[]);function N(s){return new _(g,new h(s))}class w{constructor(e){this.repository=e}load(){return this.repository.load()}}function a(s,e,...t){if(typeof s=="function")return s({...e||{},children:t});const r=document.createElement(s);for(const o in e||{})if(o.startsWith("on")&&typeof e[o]=="function")r.addEventListener(o.slice(2).toLowerCase(),e[o]);else if(o==="className")r.setAttribute("class",e[o]);else if(o==="style"&&typeof e[o]=="object")Object.assign(r.style,e[o]);else if(o==="dataset"&&typeof e[o]=="object")for(const i in e[o])r.dataset[i]=e[o][i];else r[o]=e[o];return t.flat().forEach(o=>{typeof o=="string"||typeof o=="number"?r.appendChild(document.createTextNode(o)):o instanceof Node&&r.appendChild(o)}),r}function E(s){let e="Nova lista",t="CRIAR LISTA";return s&&s.method!="post"&&(e="Renomear lista",t="SALVAR"),a("section",{className:"todo__form--container"},a("div",{className:"todo__form--content"},a("p",{className:"todo__form--title"},e),a("div",{className:"todo__form--input"},a("label",{htmlFor:"group"},a("span",{className:"fa-regular fa-face-smile",style:"color: var(--main-color)"})),a("input",{type:"text",name:"group",id:"group",placeholder:"Inserir o título da lista"})),a("div",{className:"todo__form--personalization-content"},a("div",{className:"todo__form--personalization"},"Cor")),a("div",{className:"todo__form--select-color"},a("div",{dataset:{color:"#778cdd"},className:"todo__form--color-content",style:"background-color: #778cdd"}),a("div",{dataset:{color:"#f2b7c1"},className:"todo__form--color-content",style:"background-color: #f2b7c1"}),a("div",{dataset:{color:"#437d89"},className:"todo__form--color-content",style:"background-color: #437d89"}),a("div",{dataset:{color:"#f4a261"},className:"todo__form--color-content",style:"background-color: #f4a261"}),a("div",{dataset:{color:"#e76f51"},className:"todo__form--color-content",style:"background-color: #e76f51"}),a("div",{dataset:{color:"#9b5de5"},className:"todo__form--color-content",style:"background-color: #9b5de5"})),a("div",{className:"todo__form--actions"},a("p",{id:"cancel"},"CANCELAR"),a("p",{id:"create"},t))))}function A(s){return a("a",{className:"content-box",href:`listTask.html?key=${s.group.id}`},a("span",{className:"fa-solid fa-list-ul","aria-label":"Imagem ilustrativa de uma casa",style:`color: ${s.group.color}`}),a("p",null,s.group.name))}class S{constructor(e){this.listViewModel=e}renderGroups(e){e.innerHTML="",this.listViewModel.load().forEach(t=>{this.createTemplateGroup(e,t)})}createTemplateGroup(e,t){const r=a(A,{group:t});e.appendChild(r)}}class L{constructor(e,t,r,o){this.Ui=e,this.listVM=t,this.createVM=r,this.groupForm=o,this.color}bindEvents(e=document){const t=e.querySelector(".todo__form--container"),r=e.getElementById("group");e.querySelector(".todo__footer--content").addEventListener("click",()=>{t.style.display="flex"}),e.getElementById("cancel").addEventListener("click",()=>{t.style.display="none"}),e.getElementById("create").addEventListener("click",()=>{this.createVM.create(r.value.trim(),this.color),t.style.display="none",this.Ui.renderGroups(document.querySelector(".home__group"))}),document.querySelectorAll(".todo__form--color-content").forEach(o=>{o.addEventListener("click",i=>{this.color=i.target.dataset.color})})}render(e=document){const t=document.querySelector(".main-content"),r=a(this.groupForm,{method:"post"});t.prepend(r),this.bindEvents(e),this.Ui.renderGroups(document.querySelector(".home__group"))}}const b=f,c=N("group"),l=new w(c),k=new d(b,c),I=new S(l),T=new L(I,l,k,E);T.render(document);
