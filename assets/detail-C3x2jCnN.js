import"./firebase-CuFNUL_q.js";/* empty css              */import{O as c}from"./Observable-C471KdXQ.js";import{p as m,q as u,s as h,c as p}from"./index-D376bWE1.js";import{a as k,T as f}from"./taskDetailViewModel-BaxD-g_m.js";import{h as e}from"./h-B3JzLlQ8.js";import{H as v}from"./header-HKd_pVn0.js";class y extends c{constructor(t,a){super(),this.repository=t,this.service=a}async edit(t,a={}){const i=this.service.edit(t,a),o=await this.repository.edit(i);return this.notify(i),o}}class b extends c{constructor(t){super(),this.repository=t}async remove(t){const a=await this.repository.remove(t);return this.notify(),a}async removeGroup(t){const a=await this.repository.clear(t);return this.notify(),a}}function w(s){return e("footer",{className:"main-footer"},e("hr",null),e("div",{className:"footer-content"},e("time",{className:"task-date",title:s.content},s.content),e("div",{className:"task-actions"},e("span",{className:"fa-solid fa-trash"}))))}function N(s){return e("section",{className:"main-infos-task",id:"main-infos-task"},e("div",{className:"form-input-box"},e("span",{className:"fa-regular fa-sun"}),e("button",{className:"remember-me-button form-input"},"Lembrar-me")),e("hr",null),e("div",{className:"form-input-box"},e("label",{htmlFor:"date",className:"fa-regular fa-calendar"}),e("input",{type:"date",className:"form-input",name:"date",title:"Adicionar uma data",id:"date",value:s.task.date})),e("hr",null),e("div",{className:"form-input-box"},e("label",{htmlFor:"archive",className:"fa-solid fa-paperclip"}),e("label",{htmlFor:"archive"}," Adicionar um arquivo"),e("input",{type:"file",className:"form-input",name:"archive",id:"archive"})),e("textarea",{name:"anotations",id:"anotations",placeholder:"Adicionar anotações",value:s.task.description}))}function V(s,t={}){return e("main",{className:"main-content"},e(t.Header,{title:"Tarefas"}),e("div",{className:"main-task tasks"},e(t.TaskCard,{task:s,forEdition:!0})),e(t.Form,{task:s}),e(t.Footer,{content:s.create_date}))}class M{constructor(t,a,i){this.taskDetailVM=t.detail,this.taskEditVM=t.edit,this.taskRemoveVM=t.remove,this.taskDetailComponent=a,this.config=i}async render(t){await this.taskDetailVM.get("task_id").then(a=>{console.log(a),t.appendChild(this.taskDetailComponent);const i=document.getElementById("name"),o=document.getElementById("anotations"),d=document.getElementById("date"),l=document.querySelector(".task-checkbox");window.addEventListener("input",async()=>{await this.taskEditVM.edit(a,{name:i.value,description:o.value,date:d.value})}),this.taskRemoveVM.subscribe(()=>{history.back()}),document.querySelector(".fa-trash").addEventListener("click",async()=>{await this.taskRemoveVM.remove(a)}),this.taskDetailVM.subscribe(()=>{location.reload()}),l.addEventListener("click",async()=>{await this.taskDetailVM.completedTask(a)})})}}const r=m("task"),n=new k(r,u),g=new y(r,h),D=new b(r),E=new M({detail:n,edit:g,remove:D},V(await n.get("task_id"),{TaskCard:f,Header:v,Footer:w,Form:N}),p),T=document.querySelector(".container");E.render(T);
