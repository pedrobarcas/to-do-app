import{o as p,a as y,p as _}from"./index-DvOMVOG1.js";/* empty css              *//* empty css               */import{O as l}from"./Observable-DjwQz_RI.js";import{v as g,D as f,G as v,s as w}from"./groupForm-D6aTN8NR.js";import{h as c}from"./h-B3JzLlQ8.js";class q extends l{constructor(e,t){super(),this.factory=e,this.repository=t}async create(e,t="",r="fa-solid fa-list-ul"){let a=e;e===""&&(a="Lista sem título",e="Lista sem título");let o=1;for(;await this.repository.find(a);)o++,a=`${e} (${o})`;p(y,async i=>{const h=this.factory.create(a,t,r,i.uid),m=await this.repository.save(h);this.notify(m)})}}class E{constructor(e,t,r,a,o,i){this.id=e,this.name=t,this.create_date=r,this.color=a,this.icon=o,this.user_id=i}}class L{static create(e,t=void 0,r,a){const o=new E(g(),e.trim(),f.DateFormatBrazilian(),t,r,a);return{id:o.id,name:o.name,create_date:o.create_date,color:o.color,icon:o.icon,user_id:o.user_id}}}class G extends l{constructor(e){super(),this.repository=e}async load(){const e=await this.repository.load();return this.notify(),e}}function M(s){let e="fa-solid fa-list-ul";return s.group.icon&&!s.group.icon.includes("fa-regular")&&(e=s.group.icon),c("a",{className:"content-box",href:`list.html?key=${s.group.id}`},c("span",{className:e,"aria-label":"Imagem ilustrativa de uma casa",style:`color: ${s.group.color}`}),c("p",null,s.group.name))}class S{constructor(e){this.listViewModel=e}async renderGroups(e){e.innerHTML="",(await this.listViewModel.load()).forEach(r=>{this.createTemplateGroup(e,r)})}createTemplateGroup(e,t){const r=c(M,{group:t});e.appendChild(r)}}const V="_header_17jqv_1",b="_header_content_17jqv_21",C="_header_content_text_17jqv_31",x="_circle_img_17jqv_41",n={header:V,header_content:b,header_content_text:C,circle_img:x};function N({user:s}){return c("header",{className:n.header},c("a",{href:"./account.html"},c("div",{className:n.header_content},c("div",{className:n.circle_img},s.email[0].toUpperCase()),c("div",{className:n.header_content_text},c("h1",null,"To do",c("span",{className:"fa-solid fa-chevron-down"})),c("h2",null,s.email)))))}class ${constructor(e,t,r,a,o){this.Ui=e,this.listVM=t,this.createVM=r,this.groupForm=a,this.color,this.styles=o}async bindEvents(e=document){const t=e.querySelector(`.${this.styles.container}`),r=e.getElementById("group");e.querySelector(".todo__footer--content").addEventListener("click",()=>{t.style.display="flex"}),e.getElementById("cancel").addEventListener("click",()=>{t.style.display="none"}),this.createVM.subscribe(async()=>{t.style.display="none",await this.Ui.renderGroups(document.querySelector(".home__group"))}),e.getElementById("create").addEventListener("click",async()=>{this.createVM.create(r.value.trim(),this.color,Array.from(document.querySelector(".icon").classList).slice(0,2).join(" "))}),document.querySelectorAll(`.${this.styles.colorContent}`).forEach(a=>{a.addEventListener("click",o=>{this.color=o.target.dataset.color,document.querySelectorAll(`.${this.styles.colorContent}`).forEach(i=>{i.classList.remove("is-selected")}),o.target.classList.add("is-selected")})})}async render(e=document){const t=document.querySelector(".main-content"),r=c(N,{user:JSON.parse(localStorage.getItem("userCached"))});t.prepend(r);const a=c(this.groupForm,{method:"post"});t.prepend(a),this.bindEvents(e),await this.Ui.renderGroups(document.querySelector(".home__group"))}}const j=L,d=_("group"),u=new G(d),F=new q(j,d),U=new S(u),A=new $(U,u,F,v,w);A.render(document);
