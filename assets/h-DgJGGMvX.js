(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();class y{constructor(){this.subscribers=[]}subscribe(e){this.subscribers.push(e)}unsubscribe(e){this.subscribers=this.subscribers.filter(s=>s!==e)}unsubscribeAll(){this.subscribers=[]}notify(e){this.subscribers.forEach(s=>s(e))}}class n{constructor(e){this.key=e}_loadAll(){return JSON.parse(localStorage.getItem(this.key))||[]}_saveAll(e){localStorage.setItem(this.key,JSON.stringify(e))}save(e){const s=this._loadAll();return s.push(e),this._saveAll(s),e}load(){return this._loadAll()}find(e){return this._loadAll().find(s=>s.id==e)}edit(e){const s=this._loadAll(),r=s.findIndex(t=>t.id===e.id);return r!==-1&&(s[r]=e,this._saveAll(s)),e}remove(e){const s=this._loadAll().filter(r=>r.id!==e.id);this._saveAll(s)}clear(e){localStorage.removeItem(this.key)}}class l{constructor(e){this.env=e}get(e){return this.env[e]}}let c={mainGroups:["Tarefas","Importante","Meu Dia"],routers:{home:"index.html",list:"listTask.html",detail:"taskDetail.html"}};class d{constructor(e=[],s=[],r=[]){this.validatorsEdit=e,this.validatorsRemove=s,this.validatorsSave=r}validate(e,s){if(!Array.isArray(s))throw new Error("Estratégia de validação inválida.");s.forEach(r=>r.validate(e))}save(e){return this.validate(e,this.validatorsSave),e}remove(e){return this.validate(e,this.validatorsRemove),e}edit(e,s={}){return this.validate(e,this.validatorsEdit),{...e,...s}}}class u extends d{constructor(e=[],s=[],r=[]){super(e,s,r)}edit(e,s={}){return this.validate(e,this.validatorsEdit),{...e,...s}}}class f{constructor(e,s){this.service=e,this.repository=s}load(){return this.repository.load()}save(e){return this.service.save(e),this.repository.save(e)}remove(e){const s=this.service.remove(e);return this.repository.remove(s)}edit(e){return this.repository.edit(e)}find(e){return this.repository.find(e)}clear(e){return this.repository.clear(e)}}class h extends f{constructor(e,s){super(e,s)}completed(e){return e.completed?e.completed=!1:e.completed=!0,this.repository.edit(e)}}class v{getQueryParams(e){return new URLSearchParams(window.location.search).get(e)}}const m=new u([],[],[]),p=new v,g=new l(c);function b(i){return new h(m,new n(i))}function A(i,e,...s){if(typeof i=="function")return i({...e||{},children:s});const r=document.createElement(i);for(const t in e||{})if(t.startsWith("on")&&typeof e[t]=="function")r.addEventListener(t.slice(2).toLowerCase(),e[t]);else if(t==="className")r.setAttribute("class",e[t]);else if(t==="style"&&typeof e[t]=="object")Object.assign(r.style,e[t]);else if(t==="dataset"&&typeof e[t]=="object")for(const a in e[t])r.dataset[a]=e[t][a];else r[t]=e[t];return s.flat().forEach(t=>{typeof t=="string"||typeof t=="number"?r.appendChild(document.createTextNode(t)):t instanceof Node&&r.appendChild(t)}),r}export{y as O,g as c,A as h,b as p,p as q,m as s};
