import{h as e,p as u,q as c,s as k,c as h}from"./h-CDZiPmD0.js";import{O as d}from"./Observable-1Zn7hIqi.js";/* empty css                   */import{a as p,T as v}from"./taskDetailViewModel-uvqo6_r2.js";import{H as f}from"./header-B6AbCCu0.js";class y extends d{constructor(t,a){super(),this.repository=t,this.service=a}edit(t,a={}){const i=this.service.edit(t,a),o=this.repository.edit(i);return this.notify(),o}}class b extends d{constructor(t){super(),this.repository=t}remove(t){const a=this.repository.remove(t);return this.notify(),a}removeGroup(t){const a=this.repository.clear(t);return this.notify(),a}}function N(s){return e("footer",{className:"main-footer"},e("hr",null),e("div",{className:"footer-content"},e("time",{className:"task-date",title:s.content},s.content),e("div",{className:"task-actions"},e("span",{className:"fa-solid fa-trash"}))))}function V(s){return e("section",{className:"main-infos-task",id:"main-infos-task"},e("div",{className:"form-input-box"},e("span",{className:"fa-regular fa-sun"}),e("button",{className:"remember-me-button form-input"},"Lembrar-me")),e("hr",null),e("div",{className:"form-input-box"},e("label",{htmlFor:"date",className:"fa-regular fa-calendar"}),e("input",{type:"date",className:"form-input",name:"date",title:"Adicionar uma data",id:"date",value:s.task.date})),e("hr",null),e("div",{className:"form-input-box"},e("label",{htmlFor:"archive",className:"fa-solid fa-paperclip"}),e("label",{htmlFor:"archive"}," Adicionar um arquivo"),e("input",{type:"file",className:"form-input",name:"archive",id:"archive"})),e("textarea",{name:"anotations",id:"anotations",placeholder:"Adicionar anotações",value:s.task.description}))}function M(s,t={}){return e("main",{className:"main-content"},e(t.Header,{title:"Tarefas"}),e("div",{className:"main-task tasks"},e(t.TaskCard,{task:s,forEdition:!0})),e(t.Form,{task:s}),e(t.Footer,{content:s.create_date}))}class w{constructor(t,a,i){this.taskDetailVM=t.detail,this.taskEditVM=t.edit,this.taskRemoveVM=t.remove,this.taskDetailComponent=a,this.config=i}render(t){const a=this.taskDetailVM.get("task_id");t.appendChild(this.taskDetailComponent);const i=document.getElementById("name"),o=document.getElementById("anotations"),l=document.getElementById("date"),m=document.querySelector(".task-checkbox");window.addEventListener("input",()=>{this.taskEditVM.edit(a,{name:i.value,description:o.value,date:l.value})}),this.taskRemoveVM.subscribe(()=>{history.back()}),document.querySelector(".fa-trash").addEventListener("click",()=>{this.taskRemoveVM.remove(a)}),this.taskDetailVM.subscribe(()=>{location.reload()}),m.addEventListener("click",()=>{this.taskDetailVM.completedTask(a)})}}const r=u(c.getQueryParams("key")),n=new p(r,c),g=new y(r,k),D=new b(r),E=new w({detail:n,edit:g,remove:D},M(n.get("task_id"),{TaskCard:v,Header:f,Footer:N,Form:V}),h),T=document.querySelector(".container");E.render(T);
