import{O as y,o as E,a as S,p as L}from"./index-CHvACQ46.js";/* empty css              *//* empty css               */import"./private-check-BEvfN6Bv.js";import{v as b,D as q,G as N,s as C}from"./groupForm-D6aTN8NR.js";import{h as l}from"./h-B3JzLlQ8.js";class R extends y{constructor(e,t){super(),this.factory=e,this.repository=t}async create(e,t="",a="fa-solid fa-list-ul"){let n=e;e===""&&(n="Lista sem tÃ­tulo",e="Lista sem tÃ­tulo");let o=1;for(;await this.repository.find(n);)o++,n=`${e} (${o})`;E(S,async c=>{const i=this.factory.create(n,t,a,c.uid),m=await this.repository.save(i);this.notify(m)})}}class j{constructor(e,t,a,n,o,c){this.id=e,this.name=t,this.create_date=a,this.color=n,this.icon=o,this.user_id=c}}class M{static create(e,t=void 0,a,n){const o=new j(b(),e.trim(),q.DateFormatBrazilian(),t,a,n);return{id:o.id,name:o.name,create_date:o.create_date,color:o.color,icon:o.icon,user_id:o.user_id}}}class V extends y{constructor(e){super(),this.repository=e}async load(){const e=await this.repository.load();return this.notify(),e}}function k(s){let e="fa-solid fa-list-ul";return s.group.icon&&!s.group.icon.includes("fa-regular")&&(e=s.group.icon),l("a",{className:"content-box",href:`list.html?key=${s.group.id}`},l("span",{className:e,"aria-label":"Imagem ilustrativa de uma casa",style:`color: ${s.group.color}`}),l("p",null,s.group.name))}class G{constructor(e){this.listViewModel=e}async renderGroups(e){e.innerHTML="",(await this.listViewModel.load()).forEach(a=>{this.createTemplateGroup(e,a)})}createTemplateGroup(e,t){const a=l(k,{group:t});e.appendChild(a)}}const U="_header_17jqv_1",$="_header_content_17jqv_21",x="_header_content_text_17jqv_31",P="_circle_img_17jqv_41",p={header:U,header_content:$,header_content_text:x,circle_img:P};function A({user:s}){return l("header",{className:p.header},l("a",{href:"./account.html"},l("div",{className:p.header_content},l("div",{className:p.circle_img},s.email[0].toUpperCase()),l("div",{className:p.header_content_text},l("h1",null,"To do",l("span",{className:"fa-solid fa-chevron-down"})),l("h2",null,s.email)))))}class F{constructor(e,t,a,n,o){this.Ui=e,this.listVM=t,this.createVM=a,this.groupForm=n,this.color,this.styles=o}async bindEvents(e=document){const t=e.querySelector(`.${this.styles.container}`),a=e.getElementById("group");e.querySelector(".todo__footer--content").addEventListener("click",()=>{t.style.display="flex"}),e.getElementById("cancel").addEventListener("click",()=>{t.style.display="none"}),this.createVM.subscribe(async()=>{t.style.display="none",await this.Ui.renderGroups(document.querySelector(".home__group"))}),e.getElementById("create").addEventListener("click",async()=>{this.createVM.create(a.value.trim(),this.color,Array.from(document.querySelector(".icon").classList).slice(0,2).join(" "))}),document.querySelectorAll(`.${this.styles.colorContent}`).forEach(n=>{n.addEventListener("click",o=>{this.color=o.target.dataset.color,document.querySelectorAll(`.${this.styles.colorContent}`).forEach(c=>{c.classList.remove("is-selected")}),o.target.classList.add("is-selected")})})}async render(e=document){const t=document.querySelector(".main-content"),a=l(A,{user:JSON.parse(localStorage.getItem("userCached"))});t.prepend(a);const n=l(this.groupForm,{method:"post"});t.prepend(n),this.bindEvents(e),await this.Ui.renderGroups(document.querySelector(".home__group"))}}const O="modulepreload",T=function(s){return"/to-do-app/"+s},f={},W=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let m=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=c?.nonce||c?.getAttribute("nonce");n=m(t.map(d=>{if(d=T(d),d in f)return;f[d]=!0;const u=d.endsWith(".css"),r=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${r}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":O,u||(h.as="script"),h.crossOrigin="",h.href=d,i&&h.setAttribute("nonce",i),document.head.appendChild(h),u)return new Promise((v,w)=>{h.addEventListener("load",v),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return n.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return e().catch(o)})};function D(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:a,onRegistered:n,onRegisteredSW:o,onRegisterError:c}=s;let i,m;const d=async(r=!0)=>{await m};async function u(){if("serviceWorker"in navigator){if(i=await W(async()=>{const{Workbox:r}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:r}},[]).then(({Workbox:r})=>new r("/to-do-app/sw.js",{scope:"/to-do-app/",type:"classic"})).catch(r=>{c?.(r)}),!i)return;i.addEventListener("activated",r=>{(r.isUpdate||r.isExternal)&&window.location.reload()}),i.addEventListener("installed",r=>{r.isUpdate||a?.()}),i.register({immediate:e}).then(r=>{o?o("/to-do-app/sw.js",r):n?.(r)}).catch(r=>{c?.(r)})}}return m=u(),d}const I=D({onNeedRefresh(){confirm("Nova versÃ£o disponÃ­vel! Deseja atualizar agora?")&&I(!0)},onOfflineReady(){console.log("Aplicativo pronto para uso offline ğŸš€")}}),B=M,g=L("group"),_=new V(g),H=new R(B,g),z=new G(_),J=new F(z,_,H,N,C);J.render(document);
