import{o as p,a as y}from"./firebase-CuFNUL_q.js";/* empty css              *//* empty css               */import{O as l}from"./Observable-C471KdXQ.js";import{v as _,D as g,G as f,s as v}from"./groupForm-D6aTN8NR.js";import{p as w}from"./index-D376bWE1.js";import{h as a}from"./h-B3JzLlQ8.js";class q extends l{constructor(e,t){super(),this.factory=e,this.repository=t}async create(e,t="",r="fa-solid fa-list-ul"){let c=e;e===""&&(c="Lista sem título",e="Lista sem título");let o=1;for(;await this.repository.find(c);)o++,c=`${e} (${o})`;p(y,async i=>{const m=this.factory.create(c,t,r,i.uid),h=await this.repository.save(m);this.notify(h)})}}class E{constructor(e,t,r,c,o,i){this.id=e,this.name=t,this.create_date=r,this.color=c,this.icon=o,this.user_id=i}}class L{static create(e,t=void 0,r,c){const o=new E(_(),e.trim(),g.DateFormatBrazilian(),t,r,c);return{id:o.id,name:o.name,create_date:o.create_date,color:o.color,icon:o.icon,user_id:o.user_id}}}class G extends l{constructor(e){super(),this.repository=e}async load(){const e=await this.repository.load();return this.notify(),e}}function M(s){let e="fa-solid fa-list-ul";return s.group.icon&&!s.group.icon.includes("fa-regular")&&(e=s.group.icon),a("a",{className:"content-box",href:`list.html?key=${s.group.id}`},a("span",{className:e,"aria-label":"Imagem ilustrativa de uma casa",style:`color: ${s.group.color}`}),a("p",null,s.group.name))}class S{constructor(e){this.listViewModel=e}async renderGroups(e){e.innerHTML="",(await this.listViewModel.load()).forEach(r=>{this.createTemplateGroup(e,r)})}createTemplateGroup(e,t){const r=a(M,{group:t});e.appendChild(r)}}const V="_header_17jqv_1",b="_header_content_17jqv_21",C="_header_content_text_17jqv_31",N="_circle_img_17jqv_41",n={header:V,header_content:b,header_content_text:C,circle_img:N};function x({user:s}){return a("header",{className:n.header},a("a",{href:"./account.html"},a("div",{className:n.header_content},a("div",{className:n.circle_img},s.email[0].toUpperCase()),a("div",{className:n.header_content_text},a("h1",null,"To do",a("span",{className:"fa-solid fa-chevron-down"})),a("h2",null,s.email)))),a("span",{className:"fa-solid fa-magnifying-glass"}))}class ${constructor(e,t,r,c,o){this.Ui=e,this.listVM=t,this.createVM=r,this.groupForm=c,this.color,this.styles=o}async bindEvents(e=document){const t=e.querySelector(`.${this.styles.container}`),r=e.getElementById("group");e.querySelector(".todo__footer--content").addEventListener("click",()=>{t.style.display="flex"}),e.getElementById("cancel").addEventListener("click",()=>{t.style.display="none"}),this.createVM.subscribe(async()=>{t.style.display="none",await this.Ui.renderGroups(document.querySelector(".home__group"))}),e.getElementById("create").addEventListener("click",async()=>{this.createVM.create(r.value.trim(),this.color,Array.from(document.querySelector(".icon").classList).slice(0,2).join(" "))}),document.querySelectorAll(`.${this.styles.colorContent}`).forEach(c=>{c.addEventListener("click",o=>{this.color=o.target.dataset.color,document.querySelectorAll(`.${this.styles.colorContent}`).forEach(i=>{i.classList.remove("is-selected")}),o.target.classList.add("is-selected")})})}async render(e=document){const t=document.querySelector(".main-content"),r=a(x,{user:JSON.parse(localStorage.getItem("userCached"))});t.prepend(r);const c=a(this.groupForm,{method:"post"});t.prepend(c),this.bindEvents(e),await this.Ui.renderGroups(document.querySelector(".home__group"))}}const j=L,d=w("group"),u=new G(d),F=new q(j,d),U=new S(u),A=new $(U,u,F,f,v);A.render(document);
